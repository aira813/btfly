:orphan:

.. highlight:: bash

btfly manual page
=================

SYNOPSIS
--------

**btfly** [*options*] command

DESCRIPTION
-----------
btflyはYAMLまたはJSON形式のファイルにサーバの情報を記述して、大量のサーバ群の管理を容易にするためのコマンド兼フレームワークである。

COMMANDS
--------
以下のコマンドがデフォルトで提供されている。

env
^^^
ホストの情報を下記のようにShell変数として出力する。 ::

  BTFLY_HOSTS=(web01 db01 db02 db03)

このShell変数を利用することで、下記のように複数のサーバにコマンドを発行することが可能である。 ::

  $ eval `btfly env`
  $ for host in ${BTFLY_HOSTS[@]}; do ssh $host uptime; done

csv
^^^
ホストの情報をCSVとして出力する。 ::

  $ btfly csv
  web01,db01,db02,db03

hosts
^^^^^
ホストの情報を /etc/hosts ファイルの形式で出力する。 ::

  $ btfly hosts
  # Generated by btfly
  192.168.1.10 web01
  192.168.1.50 db01
  192.168.1.60 db02
  192.168.1.61 db03

tomahawk_hosts
^^^^^^^^^^^^^^
ホストの情報を `tomahawk <http://readthedocs.org/docs/tomahawk/en/latest/>`_ の引数形式で出力する。 ::

  $ tomahawk -h `btfly tomahawk_hosts` uptime

tomahawk_hosts_file
^^^^^^^^^^^^^^^^^^^
ホストの情報を `tomahawk <http://readthedocs.org/docs/tomahawk/en/latest/>`_ のhostsファイルの形式で出力する。 ::

  $ btfly tomahawk_hosts_file > /tmp/servers.hosts
  $ tomahawk -f servers.hosts uptime


OPTIONS
-------
コマンドは - または -- で始まるオプションを受け取ることができる。

-c, --conf
^^^^^^^^^^
設定ファイルのパスを指定する。

-h, --hosts-conf
^^^^^^^^^^^^^^^^
ホスト情報が記載されているファイルのパスを指定する。

-s, --statuses
^^^^^^^^^^^^^^
ホストを絞り込むためのステータスを指定する。カンマ区切りで複数指定が可能。

-t, --tags
^^^^^^^^^^^
ホストを絞り込むためのタグを指定する。カンマ区切りで複数指定が可能。

TODO:

-f, --field
^^^^^^^^^^^
TODO:

-o, --output-file
^^^^^^^^^^^^^^^^^
ホスト情報の出力先ファイルを指定する。デフォルトはstdout。

-D, --debug
^^^^^^^^^^^
デバッグ出力を有効にする。環境変数 BTFLY_DEBUG=1 と指定することでも同様の効果が得られる。


SEE ALSO
--------
* :manpage:`ssh(1)`

